/*! Iris Color Picker - v1.0.4 - 2013-11-18
* https://github.com/Automattic/Iris
* Copyright (c) 2013 Matt Wiebe; Licensed GPLv2 */!function(e,t){function n(){var t,n;f?l="filter":(t=e('<div id="iris-gradtest" />'),n="linear-gradient(top,#fff,#000)",e.each(c,function(e,r){return t.css("backgroundImage",r+n),t.css("backgroundImage").match("gradient")?(l=e,!1):void 0}),l===!1&&(t.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),t.css("backgroundImage").match("gradient")&&(l="webkit")),t.remove())}function r(t,n){return t="top"===t?"top":"left",n=e.isArray(n)?n:Array.prototype.slice.call(arguments,1),"webkit"===l?s(t,n):c[l]+"linear-gradient("+t+", "+n.join(", ")+")"}function i(t,n){var r,i,s,u,a,f,l,c,h;t="top"===t?"top":"left",n=e.isArray(n)?n:Array.prototype.slice.call(arguments,1),r="top"===t?0:1,i=e(this),s=n.length-1,u="filter",a=1===r?"left":"top",f=1===r?"right":"bottom",l=1===r?"height":"width",c='<div class="iris-ie-gradient-shim" style="position:absolute;'+l+":100%;"+a+":%start%;"+f+":%end%;"+u+':%filter%;" data-color:"%color%"></div>',h="","static"===i.css("position")&&i.css({position:"relative"}),n=o(n),e.each(n,function(e,t){var i,o,u;return e===s?!1:(i=n[e+1],t.stop!==i.stop&&(o=100-parseFloat(i.stop)+"%",t.octoHex=(new Color(t.color)).toIEOctoHex(),i.octoHex=(new Color(i.color)).toIEOctoHex(),u="progid:DXImageTransform.Microsoft.Gradient(GradientType="+r+", StartColorStr='"+t.octoHex+"', EndColorStr='"+i.octoHex+"')",h+=c.replace("%start%",t.stop).replace("%end%",o).replace("%filter%",u)),void 0)}),i.find(".iris-ie-gradient-shim").remove(),e(h).prependTo(i)}function s(t,n){var r=[];return t="top"===t?"0% 0%,0% 100%,":"0% 100%,100% 100%,",n=o(n),e.each(n,function(e,t){r.push("color-stop("+parseFloat(t.stop)/100+", "+t.color+")")}),"-webkit-gradient(linear,"+t+r.join(",")+")"}function o(t){var n=[],r=[],i=[],s=t.length-1;return e.each(t,function(e,t){var i=t,s=!1,o=t.match(/1?[0-9]{1,2}%$/);o&&(i=t.replace(/\s?1?[0-9]{1,2}%$/,""),s=o.shift()),n.push(i),r.push(s)}),r[0]===!1&&(r[0]="0%"),r[s]===!1&&(r[s]="100%"),r=u(r),e.each(r,function(e){i[e]={color:n[e],stop:r[e]}}),i}function u(t){var n,r,i,s,o=0,a=t.length-1,f=0,l=!1;if(t.length<=2||e.inArray(!1,t)<0)return t;for(;f<t.length-1;)l||t[f]!==!1?l&&t[f]!==!1&&(a=f,f=t.length):(o=f-1,l=!0),f++;for(r=a-o,s=parseInt(t[o].replace("%"),10),n=(parseFloat(t[a].replace("%"))-s)/r,f=o+1,i=1;a>f;)t[f]=s+i*n+"%",i++,f++;return u(t)}var a,f,l,c,h,p,d,v,m;return a='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',d=navigator.userAgent.toLowerCase(),v="Microsoft Internet Explorer"===navigator.appName,m=v?parseFloat(d.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,f=v&&10>m,l=!1,c=["-moz-","-webkit-","-o-","-ms-"],h='.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;top:none;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}',f&&7>=m?(e.fn.iris=e.noop,e.support.iris=!1,void 0):(e.support.iris=!0,e.fn.gradient=function(){var t=arguments;return this.each(function(){f?i.apply(this,t):e(this).css("backgroundImage",r.apply(this,t))})},e.fn.raninbowGradient=function(t,n){var r,i,s,o;for(t=t||"top",r=e.extend({},{s:100,l:50},n),i="hsl(%h%,"+r.s+"%,"+r.l+"%)",s=0,o=[];360>=s;)o.push(i.replace("%h%",s)),s+=30;return this.each(function(){e(this).gradient(t,o)})},p={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var t=this,r=t.element,i=t.options.color||r.val();l===!1&&n(),r.is("input")?(t.picker=t.options.target?e(a).appendTo(t.options.target):e(a).insertAfter(r),t._addInputListeners(r)):(r.append(a),t.picker=r.find(".iris-picker")),v?9===m?t.picker.addClass("iris-ie-9"):8>=m&&t.picker.addClass("iris-ie-lt9"):d.indexOf("compatible")<0&&d.indexOf("khtml")<0&&d.match(/mozilla/)&&t.picker.addClass("iris-mozilla"),t.options.palettes&&t._addPalettes(),t._color=(new Color(i)).setHSpace(t.options.mode),t.options.color=t._color.toString(),t.controls={square:t.picker.find(".iris-square"),squareDrag:t.picker.find(".iris-square-value"),horiz:t.picker.find(".iris-square-horiz"),vert:t.picker.find(".iris-square-vert"),strip:t.picker.find(".iris-strip"),stripSlider:t.picker.find(".iris-strip .iris-slider-offset")},"hsv"===t.options.mode&&t._has("l",t.options.controls)?t.options.controls=t._defaultHSVControls:"hsl"===t.options.mode&&t._has("v",t.options.controls)&&(t.options.controls=t._defaultHSLControls),t.hue=t._color.h(),t.options.hide&&t.picker.hide(),t.options.border&&t.picker.addClass("iris-border"),t._initControls(),t.active="external",t._dimensions(),t._change()},_has:function(t,n){var r=!1;return e.each(n,function(e,n){return t===n?(r=!0,!1):void 0}),r},_addPalettes:function(){var t=e('<div class="iris-palette-container" />'),n=e('<a class="iris-palette" tabindex="0" />'),r=e.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(t=this.picker.find(".iris-palette-container").detach().html("")),e.each(r,function(e,r){n.clone().data("color",r).css("backgroundColor",r).appendTo(t).height(10).width(10)}),this.picker.append(t)},_paint:function(){var e=this;e._paintDimension("top","strip"),e._paintDimension("top","vert"),e._paintDimension("left","horiz")},_paintDimension:function(e,t){var n,r=this,i=r._color,s=r.options.mode,o=r._getHSpaceColor(),u=r.controls[t],a=r.options.controls;if(t!==r.active&&("square"!==r.active||"strip"===t))switch(a[t]){case"h":if("hsv"===s){switch(o=i.clone(),t){case"horiz":o[a.vert](100);break;case"vert":o[a.horiz](100);break;case"strip":o.setHSpace("hsl")}n=o.toHsl()}else n="strip"===t?{s:o.s,l:o.l}:{s:100,l:o.l};u.raninbowGradient(e,n);break;case"s":"hsv"===s?"vert"===t?n=[i.clone().a(0).s(0).toCSS("rgba"),i.clone().a(1).s(0).toCSS("rgba")]:"strip"===t?n=[i.clone().s(100).toCSS("hsl"),i.clone().s(0).toCSS("hsl")]:"horiz"===t&&(n=["#fff","hsl("+o.h+",100%,50%)"]):n="vert"===t&&"h"===r.options.controls.horiz?["hsla(0, 0%, "+o.l+"%, 0)","hsla(0, 0%, "+o.l+"%, 1)"]:["hsl("+o.h+",0%,50%)","hsl("+o.h+",100%,50%)"],u.gradient(e,n);break;case"l":n="strip"===t?["hsl("+o.h+",100%,100%)","hsl("+o.h+", "+o.s+"%,50%)","hsl("+o.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],u.gradient(e,n);break;case"v":n="strip"===t?[i.clone().v(100).toCSS(),i.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],u.gradient(e,n)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_dimensions:function(t){var n,r,i,s,o=this,u=o.options,a=o.controls,f=a.square,l=o.picker.find(".iris-strip"),c="77.5%",h="12%",p=20,d=u.border?u.width-p:u.width,v=e.isArray(u.palettes)?u.palettes.length:o._palettes.length;return t&&(f.css("width",""),l.css("width",""),o.picker.css({width:"",height:""})),c=d*(parseFloat(c)/100),h=d*(parseFloat(h)/100),n=u.border?c+p:c,f.width(c).height(c),l.height(c).width(h),o.picker.css({width:u.width,height:n}),u.palettes?(r=2*c/100,s=c-(v-1)*r,i=s/v,o.picker.find(".iris-palette").each(function(t){var n=0===t?0:r;e(this).css({width:i,height:i,marginLeft:n})}),o.picker.css("paddingBottom",i+r),l.height(i+r+c),void 0):o.picker.css("paddingBottom","")},_addInputListeners:function(e){var t=this,n=100,r=function(n){var r=new Color(e.val()),i=e.val().replace(/^#/,"");e.removeClass("iris-error"),r.error?""!==i&&e.addClass("iris-error"):r.toString()!==t._color.toString()&&("keyup"===n.type&&i.match(/^[0-9a-fA-F]{3}$/)||t._setOption("color",r.toString()))};e.on("change",r).on("keyup",t._debounce(r,n)),t.options.hide&&e.one("focus",function(){t.show()})},_initControls:function(){var t=this,n=t.controls,r=n.square,i=t.options.controls,s=t._scale[i.strip];n.stripSlider.slider({orientation:"vertical",max:s,slide:function(e,n){t.active="strip","h"===i.strip&&(n.value=s-n.value),t._color[i.strip](n.value),t._change.apply(t,arguments)}}),n.squareDrag.draggable({containment:"parent",zIndex:1e3,cursor:"move",drag:function(e,n){t._squareDrag(e,n)},start:function(){r.addClass("iris-dragging"),e(this).addClass("ui-state-focus")},stop:function(){r.removeClass("iris-dragging"),e(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(n){var r="ui-state-focus";n.preventDefault(),"mousedown"===n.type?(t.picker.find("."+r).removeClass(r).blur(),e(this).addClass(r).focus()):e(this).removeClass(r)}).on("keydown",function(e){var r=n.square,i=n.squareDrag,s=i.position(),o=t.options.width/100;switch(e.altKey&&(o*=10),e.keyCode){case 37:s.left-=o;break;case 38:s.top-=o;break;case 39:s.left+=o;break;case 40:s.top+=o;break;default:return!0}s.left=Math.max(0,Math.min(s.left,r.width())),s.top=Math.max(0,Math.min(s.top,r.height())),i.css(s),t._squareDrag(e,{position:s}),e.preventDefault()}),r.mousedown(function(n){var r,i;1===n.which&&e(n.target).is("div")&&(r=t.controls.square.offset(),i={top:n.pageY-r.top,left:n.pageX-r.left},n.preventDefault(),t._squareDrag(n,{position:i}),n.target=t.controls.squareDrag.get(0),t.controls.squareDrag.css(i).trigger(n))}),t.options.palettes&&t._paletteListeners()},_paletteListeners:function(){var t=this;t.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){t._color.fromCSS(e(this).data("color")),t.active="external",t._change()}).on("keydown.palette",".iris-palette",function(t){return 13!==t.keyCode&&32!==t.keyCode?!0:(t.stopPropagation(),e(this).click(),void 0)})},_squareDrag:function(e,t){var n=this,r=n.options.controls,i=n._squareDimensions(),s=Math.round((i.h-t.position.top)/i.h*n._scale[r.vert]),o=n._scale[r.horiz]-Math.round((i.w-t.position.left)/i.w*n._scale[r.horiz]);n._color[r.horiz](o)[r.vert](s),n.active="square",n._change.apply(n,arguments)},_setOption:function(t,n){var r,i,s,o=this,u=o.options[t],a=!1;switch(o.options[t]=n,t){case"color":n=""+n,r=n.replace(/^#/,""),i=(new Color(n)).setHSpace(o.options.mode),i.error?o.options[t]=u:(o._color=i,o.options.color=o.options[t]=o._color.toString(),o.active="external",o._change());break;case"palettes":a=!0,n?o._addPalettes():o.picker.find(".iris-palette-container").remove(),u||o._paletteListeners();break;case"width":a=!0;break;case"border":a=!0,s=n?"addClass":"removeClass",o.picker[s]("iris-border");break;case"mode":case"controls":if(u===n)return;return s=o.element,u=o.options,u.hide=!o.picker.is(":visible"),o.destroy(),o.picker.remove(),e(o.element).iris(u)}a&&o._dimensions(!0)},_squareDimensions:function(e){var n,r,i=this.controls.square;return e!==t&&i.data("dimensions")?i.data("dimensions"):(r=this.controls.squareDrag,n={w:i.width(),h:i.height()},i.data("dimensions",n),n)},_isNonHueControl:function(e,t){return"square"===e&&"h"===this.options.controls.strip?!0:"external"===t||"h"===t&&"strip"===e?!1:!0},_change:function(){var t=this,n=t.controls,r=t._getHSpaceColor(),i=["square","strip"],s=t.options.controls,o=s[t.active]||"external",u=t.hue;"strip"===t.active?i=[]:"external"!==t.active&&i.pop(),e.each(i,function(e,i){var o,u,a;if(i!==t.active)switch(i){case"strip":o="h"===s.strip?t._scale[s.strip]-r[s.strip]:r[s.strip],n.stripSlider.slider("value",o);break;case"square":u=t._squareDimensions(),a={left:r[s.horiz]/t._scale[s.horiz]*u.w,top:u.h-r[s.vert]/t._scale[s.vert]*u.h},t.controls.squareDrag.css(a)}}),r.h!==u&&t._isNonHueControl(t.active,o)&&t._color.h(u),t.hue=t._color.h(),t.options.color=t._color.toString(),t._inited&&t._trigger("change",{type:t.active},{color:t._color}),t.element.is(":input")&&!t._color.error&&(t.element.removeClass("iris-error"),t.element.val()!==t._color.toString()&&t.element.val(t._color.toString())),t._paint(),t._inited=!0,t.active=!1},_debounce:function(e,t,n){var r,i;return function(){var s,o,u=this,a=arguments;return s=function(){r=null,n||(i=e.apply(u,a))},o=n&&!r,clearTimeout(r),r=setTimeout(s,t),o&&(i=e.apply(u,a)),i}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(e){return e===!0?this._color.clone():e===t?this._color.toString():(this.option("color",e),void 0)}},e.widget("a8c.iris",p),e('<style id="iris-css">'+h+"</style>").appendTo("head"),void 0)}(jQuery),function(e,t){var n=function(e,t){return this instanceof n?this._init(e,t):new n(e,t)};n.fn=n.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(e){var n="noop";switch(typeof e){case"object":return e.a!==t&&this.a(e.a),n=e.r!==t?"fromRgb":e.l!==t?"fromHsl":e.v!==t?"fromHsv":n,this[n](e);case"string":return this.fromCSS(e);case"number":return this.fromInt(parseInt(e,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var e=new n(this.toInt()),t=["_alpha","_hSpace","_hsl","_hsv","error"],r=t.length-1;r>=0;r--)e[t[r]]=this[t[r]];return e},setHSpace:function(e){return this._hSpace="hsv"===e?e:"hsl",this},noop:function(){return this},fromCSS:function(e){var t,n=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,""),e.match(n)&&e.match(/\)$/)){if(t=e.replace(/(\s|%)/g,"").replace(n,"").replace(/,?\);?$/,"").split(","),t.length<3)return this._error();if(4===t.length&&(this.a(parseFloat(t.pop())),this.error))return this;for(var r=t.length-1;r>=0;r--)if(t[r]=parseInt(t[r],10),isNaN(t[r]))return this._error();return e.match(/^rgb/)?this.fromRgb({r:t[0],g:t[1],b:t[2]}):e.match(/^hsv/)?this.fromHsv({h:t[0],s:t[1],v:t[2]}):this.fromHsl({h:t[0],s:t[1],l:t[2]})}return this.fromHex(e)},fromRgb:function(e,n){return"object"!=typeof e||e.r===t||e.g===t||e.b===t?this._error():(this.error=!1,this.fromInt(parseInt((e.r<<16)+(e.g<<8)+e.b,10),n))},fromHex:function(e){return e=e.replace(/^#/,"").replace(/^0x/,""),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),this.error=!/^[0-9A-F]{6}$/i.test(e),this.fromInt(parseInt(e,16))},fromHsl:function(e){var n,r,i,s,o,u,a,f;return"object"!=typeof e||e.h===t||e.s===t||e.l===t?this._error():(this._hsl=e,this._hSpace="hsl",u=e.h/360,a=e.s/100,f=e.l/100,0===a?n=r=i=f:(s=.5>f?f*(1+a):f+a-f*a,o=2*f-s,n=this.hue2rgb(o,s,u+1/3),r=this.hue2rgb(o,s,u),i=this.hue2rgb(o,s,u-1/3)),this.fromRgb({r:255*n,g:255*r,b:255*i},!0))},fromHsv:function(e){var n,r,i,s,o,u,a,f,l,c,h;if("object"!=typeof e||e.h===t||e.s===t||e.v===t)return this._error();switch(this._hsv=e,this._hSpace="hsv",n=e.h/360,r=e.s/100,i=e.v/100,a=Math.floor(6*n),f=6*n-a,l=i*(1-r),c=i*(1-f*r),h=i*(1-(1-f)*r),a%6){case 0:s=i,o=h,u=l;break;case 1:s=c,o=i,u=l;break;case 2:s=l,o=i,u=h;break;case 3:s=l,o=c,u=i;break;case 4:s=h,o=l,u=i;break;case 5:s=i,o=l,u=c}return this.fromRgb({r:255*s,g:255*o,b:255*u},!0)},fromInt:function(e,n){return this._color=parseInt(e,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),n===t&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e},toString:function(){var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;t>=0;t--)e="0"+e;return"#"+e},toCSS:function(e,t){switch(e=e||"hex",t=parseFloat(t||this._alpha),e){case"rgb":case"rgba":var n=this.toRgb();return 1>t?"rgba( "+n.r+", "+n.g+", "+n.b+", "+t+" )":"rgb( "+n.r+", "+n.g+", "+n.b+" )";case"hsl":case"hsla":var r=this.toHsl();return 1>t?"hsla( "+r.h+", "+r.s+"%, "+r.l+"%, "+t+" )":"hsl( "+r.h+", "+r.s+"%, "+r.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var e,t,n=this.toRgb(),r=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(r,i,s),u=Math.min(r,i,s),a=(o+u)/2;if(o===u)e=t=0;else{var f=o-u;switch(t=a>.5?f/(2-o-u):f/(o+u),o){case r:e=(i-s)/f+(s>i?6:0);break;case i:e=(s-r)/f+2;break;case s:e=(r-i)/f+4}e/=6}return e=Math.round(360*e),0===e&&this._hsl.h!==e&&(e=this._hsl.h),t=Math.round(100*t),0===t&&this._hsl.s&&(t=this._hsl.s),{h:e,s:t,l:Math.round(100*a)}},toHsv:function(){var e,t,n=this.toRgb(),r=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(r,i,s),u=Math.min(r,i,s),a=o,f=o-u;if(t=0===o?0:f/o,o===u)e=t=0;else{switch(o){case r:e=(i-s)/f+(s>i?6:0);break;case i:e=(s-r)/f+2;break;case s:e=(r-i)/f+4}e/=6}return e=Math.round(360*e),0===e&&this._hsv.h!==e&&(e=this._hsv.h),t=Math.round(100*t),0===t&&this._hsv.s&&(t=this._hsv.s),{h:e,s:t,v:Math.round(100*a)}},toInt:function(){return this._color},toIEOctoHex:function(){var e=this.toString(),t=parseInt(255*this._alpha,10).toString(16);return 1===t.length&&(t="0"+t),"#"+t+e.replace(/^#/,"")},toLuminosity:function(){var e=this.toRgb();return.2126*Math.pow(e.r/255,2.2)+.7152*Math.pow(e.g/255,2.2)+.0722*Math.pow(e.b/255,2.2)},getDistanceLuminosityFrom:function(e){if(e instanceof n){var t=this.toLuminosity(),r=e.toLuminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)}throw"getDistanceLuminosityFrom requires a Color object"},getMaxContrastColor:function(){var e=this.toLuminosity(),t=e>=.5?"000000":"ffffff";return new n(t)},getGrayscaleContrastingColor:function(e){if(!e)return this.getMaxContrastColor();var t=5>e?5:e,n=this.getMaxContrastColor();if(e=n.getDistanceLuminosityFrom(this),t>=e)return n;for(var r=0===n.toInt()?1:-1;e>t;)n=n.incrementLightness(r),e=n.getDistanceLuminosityFrom(this);return n},getReadableContrastingColor:function(e,r){if(!e instanceof n)return this;var i=r===t?5:r,s=e.getDistanceLuminosityFrom(this),o=e.getMaxContrastColor(),u=o.getDistanceLuminosityFrom(e);if(i>=u)return o;if(s>=i)return this;for(var a=0===o.toInt()?-1:1;i>s&&(this.incrementLightness(a),s=this.getDistanceLuminosityFrom(e),0!==this._color&&16777215!==this._color););return this},a:function(e){if(e===t)return this._alpha;var n=parseFloat(e);return isNaN(n)?this._error():(this._alpha=n,this)},darken:function(e){return e=e||5,this.l(-e,!0)},lighten:function(e){return e=e||5,this.l(e,!0)},saturate:function(e){return e=e||15,this.s(e,!0)},desaturate:function(e){return e=e||15,this.s(-e,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(e){e=e||1;var t=180+30*e;return this.h(t,!0)},getAnalog:function(e){e=e||1;var t=30*e;return this.h(t,!0)},getTetrad:function(e){e=e||1;var t=60*e;return this.h(t,!0)},getTriad:function(e){e=e||1;var t=120*e;return this.h(t,!0)},_partial:function(e){var n=r[e];return function(r,i){var s=this._spaceFunc("to",n.space);return r===t?s[e]:(i===!0&&(r=s[e]+r),n.mod&&(r%=n.mod),n.range&&(r=r<n.range[0]?n.range[0]:r>n.range[1]?n.range[1]:r),s[e]=r,this._spaceFunc("from",n.space,s))}},_spaceFunc:function(e,t,n){var r=t||this._hSpace,i=e+r.charAt(0).toUpperCase()+r.substr(1);return this[i](n)}};var r={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var i in r)r.hasOwnProperty(i)&&(n.fn[i]=n.fn._partial(i));e.Color=n}("object"==typeof exports&&exports||this);