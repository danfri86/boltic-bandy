/**
 * Attempt to re-color SVG icons used in the admin menu or the toolbar
 *
 */window.wp=window.wp||{};wp.svgPainter=function(e,t,n,r){"use strict";var i,s,o,u={},a=[];e(n).ready(function(){if(n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")){e(n.body).removeClass("no-svg").addClass("svg");wp.svgPainter.init()}});s=function(){function o(){while(s<256){e=String.fromCharCode(s);n+=e;i[s]=s;r[s]=t.indexOf(e);++s}}function u(t,n,r,i,s,o){var u,a,f=0,l=0,h="",p=0;t=String(t);a=t.length;while(l<a){e=t.charCodeAt(l);e=e<256?r[e]:-1;f=(f<<s)+e;p+=s;while(p>=o){p-=o;u=f>>p;h+=i.charAt(u);f^=u<<p}++l}!n&&p>0&&(h+=i.charAt(f<<o-p));return h}function a(n){e||o();n=u(n,!1,i,t,8,6);return n+"====".slice(n.length%4||4)}function f(t){var i;e||o();t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=String(t).split("=");i=t.length;do{--i;t[i]=u(t[i],!0,r,n,6,8)}while(i>0);t=t.join("");return t}var e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=[256],i=[256],s=0;return{atob:f,btoa:a}}();return{init:function(){o=this;i=e("#adminmenu .wp-menu-image, #wpadminbar .ab-item");this.setColors();this.findElements();this.paint()},setColors:function(e){typeof e=="undefined"&&typeof t._wpColorScheme!="undefined"&&(e=t._wpColorScheme);e&&e.icons&&e.icons.base&&e.icons.current&&e.icons.focus&&(u=e.icons)},findElements:function(){i.each(function(){var t=e(this),n=t.css("background-image");n&&n.indexOf("data:image/svg+xml;base64")!=-1&&a.push(t)})},paint:function(){e.each(a,function(e,n){var r=n.parent().parent();if(r.hasClass("current")||r.hasClass("wp-has-current-submenu"))o.paintElement(n,"current");else{o.paintElement(n,"base");r.hover(function(){o.paintElement(n,"focus")},function(){t.setTimeout(function(){o.paintElement(n,"base")},100)})}})},paintElement:function(e,n){var r,i,o;if(!n||!u.hasOwnProperty(n))return;o=u[n];if(!o.match(/^(#[0-9a-f]{3}|#[0-9a-f]{6})$/i))return;r=e.data("wp-ui-svg-"+o);if(r==="none")return;if(!r){i=e.css("background-image").match(/.+data:image\/svg\+xml;base64,([A-Za-z0-9\+\/\=]+)/);if(!i||!i[1]){e.data("wp-ui-svg-"+o,"none");return}try{"atob"in t?r=t.atob(i[1]):r=s.atob(i[1])}catch(a){}if(!r){e.data("wp-ui-svg-"+o,"none");return}r=r.replace(/fill="(.+?)"/g,'fill="'+o+'"');r=r.replace(/style="(.+?)"/g,'style="fill:'+o+'"');r=r.replace(/fill:.*?;/g,"fill: "+o+";");"btoa"in t?r=t.btoa(r):r=s.btoa(r);e.data("wp-ui-svg-"+o,r)}e.attr("style",'background-image: url("data:image/svg+xml;base64,'+r+'") !important;')}}}(jQuery,window,document);