/* global ajaxurl */(function(e){e(document).ready(function(){var t,n=e("#custom-background-image");e("#background-color").wpColorPicker({change:function(e,t){n.css("background-color",t.color.toString())},clear:function(){n.css("background-color","")}});e('input[name="background-position-x"]').change(function(){n.css("background-position",e(this).val()+" top")});e('input[name="background-repeat"]').change(function(){n.css("background-repeat",e(this).val())});e("#choose-from-library-link").click(function(n){var r=e(this);n.preventDefault();if(t){t.open();return}t=wp.media.frames.customBackground=wp.media({title:r.data("choose"),library:{type:"image"},button:{text:r.data("update"),close:!1}});t.on("select",function(){var n=t.state().get("selection").first();e.post(ajaxurl,{action:"set-background-image",attachment_id:n.id,size:"full"}).done(function(){window.location.reload()})});t.open()})})})(jQuery);