/* global ajaxurl, wpAjax, tagsl10n, showNotice, validateForm */jQuery(document).ready(function(e){e("#the-list").on("click",".delete-tag",function(){var t=e(this),n=t.parents("tr"),r=!0,i;"undefined"!=showNotice&&(r=showNotice.warn());if(r){i=t.attr("href").replace(/[^?]*\?/,"").replace(/action=delete/,"action=delete-tag");e.post(ajaxurl,i,function(t){if("1"==t){e("#ajax-response").empty();n.fadeOut("normal",function(){n.remove()});e('select#parent option[value="'+i.match(/tag_ID=(\d+)/)[1]+'"]').remove();e("a.tag-link-"+i.match(/tag_ID=(\d+)/)[1]).remove()}else if("-1"==t){e("#ajax-response").empty().append('<div class="error"><p>'+tagsl10n.noPerm+"</p></div>");n.children().css("backgroundColor","")}else{e("#ajax-response").empty().append('<div class="error"><p>'+tagsl10n.broken+"</p></div>");n.children().css("backgroundColor","")}});n.children().css("backgroundColor","#f33")}return!1});e("#submit").click(function(){var t=e(this).parents("form");if(!validateForm(t))return!1;e.post(ajaxurl,e("#addtag").serialize(),function(n){var r,i,s,o,u;e("#ajax-response").empty();r=wpAjax.parseAjaxResponse(n,"ajax-response");if(!r||r.errors)return;i=t.find("select#parent").val();i>0&&e("#tag-"+i).length>0?e(".tags #tag-"+i).after(r.responses[0].supplemental.noparents):e(".tags").prepend(r.responses[0].supplemental.parents);e(".tags .no-items").remove();if(t.find("select#parent")){s=r.responses[1].supplemental;o="";for(u=0;u<r.responses[1].position;u++)o+="&nbsp;&nbsp;&nbsp;";t.find("select#parent option:selected").after('<option value="'+s.term_id+'">'+o+s.name+"</option>")}e('input[type="text"]:visible, textarea:visible',t).val("")});return!1})});