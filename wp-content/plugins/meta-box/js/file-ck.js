jQuery(document).ready(function(e){e(".rwmb-add-file").each(function(){var t=e(this),n=t.siblings(".file-input"),r=n.first(),i=n.length,s=t.closest(".rwmb-input").find(".rwmb-uploaded"),o=s.children("li").length,u=s.data("max_file_uploads");if(u>0){i+o>=u&&t.hide();o>=u&&n.hide()}t.click(function(){if(u<=0||i+o<u){r.clone().insertBefore(t);i++;u>0&&i+o>=u&&t.hide()}return!1})});e(".rwmb-uploaded").on("click",".rwmb-delete-file",function(){var t=e(this),n=t.parents("li"),r=t.closest(".rwmb-uploaded"),i={action:"rwmb_delete_file",_ajax_nonce:r.data("delete_nonce"),post_id:e("#post_ID").val(),field_id:r.data("field_id"),attachment_id:t.data("attachment_id"),force_delete:r.data("force_delete")};e.post(ajaxurl,i,function(t){if(!t.success){alert(t.data);return}n.addClass("removed");if(!("ontransitionend"in window)&&"onwebkittransitionend"in window&&!("onotransitionend"in myDiv||navigator.appName=="Opera")){n.remove();r.trigger("update.rwmbFile")}e(".rwmb-uploaded").on("transitionend webkitTransitionEnd otransitionend","li.removed",function(){e(this).remove();r.trigger("update.rwmbFile")})},"json");return!1});e(".rwmb-uploaded").on("transitionend webkitTransitionEnd otransitionend","li.removed",function(){e(this).remove()});e("body").on("update.rwmbFile",".rwmb-uploaded",function(){var t=e(this),n=t.data("max_file_uploads"),r=t.siblings(".new-files"),i=t.children().length;i>0?t.removeClass("hidden"):t.addClass("hidden");if(n===0)return!1;i>=n?r.addClass("hidden"):r.removeClass("hidden");return!1})});